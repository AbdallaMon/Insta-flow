<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InstaFlow - Database Schema Documentation</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        color: #e4e4e4;
        min-height: 100vh;
        line-height: 1.6;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        text-align: center;
        padding: 40px 0;
        border-bottom: 2px solid #0f3460;
        margin-bottom: 40px;
      }

      header h1 {
        font-size: 2.5rem;
        color: #00d9ff;
        margin-bottom: 10px;
      }

      header p {
        color: #888;
        font-size: 1.1rem;
      }

      .section {
        background: #1f2937;
        border-radius: 16px;
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid #374151;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid #374151;
      }

      .section-header .icon {
        font-size: 2rem;
      }

      .section-header h2 {
        color: #00d9ff;
        font-size: 1.5rem;
      }

      .hierarchy-box {
        background: #111827;
        border-radius: 12px;
        padding: 25px;
        font-family: "Courier New", monospace;
        font-size: 14px;
        overflow-x: auto;
        white-space: pre;
        color: #10b981;
        border: 1px solid #1f2937;
      }

      .model-card {
        background: #111827;
        border-radius: 12px;
        margin-bottom: 20px;
        overflow: hidden;
        border: 1px solid #374151;
      }

      .model-header {
        background: linear-gradient(90deg, #0f3460 0%, #1a1a2e 100%);
        padding: 15px 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .model-header h3 {
        color: #00d9ff;
        font-size: 1.2rem;
      }

      .model-header .badge {
        background: #10b981;
        color: #000;
        padding: 3px 10px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: bold;
      }

      .model-body {
        padding: 20px;
      }

      .fields-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 15px;
      }

      .fields-table th,
      .fields-table td {
        padding: 10px 15px;
        text-align: right;
        border-bottom: 1px solid #374151;
      }

      .fields-table th {
        background: #1f2937;
        color: #9ca3af;
        font-weight: 600;
        font-size: 0.85rem;
      }

      .fields-table td {
        font-size: 0.9rem;
      }

      .field-name {
        color: #f59e0b;
        font-family: "Courier New", monospace;
      }

      .field-type {
        color: #8b5cf6;
        font-family: "Courier New", monospace;
        font-size: 0.85rem;
      }

      .field-desc {
        color: #9ca3af;
      }

      .tag {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: bold;
        margin-left: 5px;
      }

      .tag-pk {
        background: #ef4444;
        color: white;
      }

      .tag-fk {
        background: #3b82f6;
        color: white;
      }

      .tag-unique {
        background: #8b5cf6;
        color: white;
      }

      .tag-nullable {
        background: #6b7280;
        color: white;
      }

      .relations-box {
        background: #1f2937;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
      }

      .relations-box h4 {
        color: #10b981;
        margin-bottom: 10px;
        font-size: 0.95rem;
      }

      .relation-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        border-bottom: 1px dashed #374151;
        font-size: 0.9rem;
      }

      .relation-item:last-child {
        border-bottom: none;
      }

      .relation-arrow {
        color: #00d9ff;
      }

      .flow-box {
        background: #1f2937;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        border-right: 4px solid #10b981;
      }

      .flow-box h4 {
        color: #10b981;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .flow-step {
        display: flex;
        gap: 15px;
        margin-bottom: 12px;
        align-items: flex-start;
      }

      .step-number {
        background: #00d9ff;
        color: #000;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 0.85rem;
        flex-shrink: 0;
      }

      .step-content {
        flex: 1;
        padding-top: 3px;
      }

      .step-arrow {
        text-align: center;
        color: #4b5563;
        margin: 5px 0 5px 43px;
      }

      .enum-box {
        background: #1f2937;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
      }

      .enum-box h4 {
        color: #f59e0b;
        margin-bottom: 10px;
      }

      .enum-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 10px;
      }

      .enum-item {
        background: #111827;
        padding: 8px 12px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .enum-value {
        color: #f59e0b;
        font-family: "Courier New", monospace;
        font-size: 0.85rem;
      }

      .enum-desc {
        color: #6b7280;
        font-size: 0.8rem;
      }

      .permissions-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
      }

      .permissions-table th,
      .permissions-table td {
        padding: 12px;
        text-align: center;
        border: 1px solid #374151;
      }

      .permissions-table th {
        background: #0f3460;
        color: #00d9ff;
      }

      .permissions-table td:first-child {
        text-align: right;
        background: #1f2937;
        font-weight: 600;
      }

      .check {
        color: #10b981;
        font-size: 1.2rem;
      }

      .cross {
        color: #ef4444;
        font-size: 1.2rem;
      }

      .code-block {
        background: #111827;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 0.85rem;
        overflow-x: auto;
        border: 1px solid #374151;
      }

      .code-block .keyword {
        color: #f59e0b;
      }

      .code-block .string {
        color: #10b981;
      }

      .code-block .comment {
        color: #6b7280;
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .summary-card {
        background: #111827;
        border-radius: 12px;
        padding: 20px;
        border: 1px solid #374151;
      }

      .summary-card h4 {
        color: #00d9ff;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .summary-list {
        list-style: none;
      }

      .summary-list li {
        padding: 8px 0;
        border-bottom: 1px dashed #374151;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .summary-list li:last-child {
        border-bottom: none;
      }

      .nav-sidebar {
        position: fixed;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        background: #1f2937;
        border-radius: 12px;
        padding: 15px;
        border: 1px solid #374151;
        z-index: 100;
      }

      .nav-sidebar a {
        display: block;
        color: #9ca3af;
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 0.85rem;
        transition: all 0.2s;
      }

      .nav-sidebar a:hover {
        background: #374151;
        color: #00d9ff;
      }

      @media (max-width: 1200px) {
        .nav-sidebar {
          display: none;
        }
      }

      .webhook-events {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 10px;
        margin-top: 15px;
      }

      .webhook-event {
        background: #111827;
        padding: 12px;
        border-radius: 8px;
        border-right: 3px solid #8b5cf6;
      }

      .webhook-event code {
        color: #8b5cf6;
        font-size: 0.9rem;
      }

      .webhook-event p {
        color: #6b7280;
        font-size: 0.85rem;
        margin-top: 5px;
      }

      .index-box {
        background: #1f2937;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
      }

      .index-box h4 {
        color: #ef4444;
        margin-bottom: 10px;
      }

      .index-item {
        font-family: "Courier New", monospace;
        font-size: 0.85rem;
        padding: 5px 0;
        color: #f59e0b;
      }

      .highlight-box {
        background: linear-gradient(
          90deg,
          rgba(16, 185, 129, 0.1) 0%,
          transparent 100%
        );
        border-right: 4px solid #10b981;
        padding: 15px 20px;
        border-radius: 8px;
        margin: 15px 0;
      }

      .highlight-box.warning {
        background: linear-gradient(
          90deg,
          rgba(245, 158, 11, 0.1) 0%,
          transparent 100%
        );
        border-right-color: #f59e0b;
      }

      .highlight-box.info {
        background: linear-gradient(
          90deg,
          rgba(59, 130, 246, 0.1) 0%,
          transparent 100%
        );
        border-right-color: #3b82f6;
      }

      footer {
        text-align: center;
        padding: 40px 0;
        color: #6b7280;
        border-top: 1px solid #374151;
        margin-top: 40px;
      }
    </style>
  </head>
  <body>
    <nav class="nav-sidebar">
      <a href="#hierarchy">ğŸ—ï¸ Ø§Ù„Ù‡ÙŠÙƒÙ„</a>
      <a href="#user">ğŸ‘¤ User</a>
      <a href="#permissions">ğŸ” Permissions</a>
      <a href="#plans">ğŸ’³ Plans</a>
      <a href="#customer">ğŸ‘¥ Customer</a>
      <a href="#receiver">ğŸ’° Receiver</a>
      <a href="#payment">ğŸ’¸ Payment</a>
      <a href="#device">ğŸ“± Device</a>
      <a href="#notification">ğŸ”” Notification</a>
      <a href="#api">ğŸ”‘ API</a>
      <a href="#webhook">ğŸŒ Webhook</a>
      <a href="#audit">ğŸ“‹ Audit</a>
      <a href="#summary">ğŸ“Š Summary</a>
    </nav>

    <div class="container">
      <header>
        <h1>ğŸš€ InstaFlow Database Schema</h1>
        <p>ØªÙˆØ«ÙŠÙ‚ ÙƒØ§Ù…Ù„ Ù„Ù‡ÙŠÙƒÙ„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</p>
      </header>

      <!-- Section: Hierarchy -->
      <section class="section" id="hierarchy">
        <div class="section-header">
          <span class="icon">ğŸ—ï¸</span>
          <h2>Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ù†Ø¸Ø§Ù…</h2>
        </div>

        <div class="hierarchy-box">
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ USER
          TYPES â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ ğŸ”´
          SUPER_ADMIN - ØµØ§Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â”‚ â”‚ ğŸ‘‘ OWNER - ØµØ§Ø­Ø¨ Ø­Ø³Ø§Ø¨ ØªØ§Ø¬Ø± â”‚ â”‚ ğŸ‘¨â€ğŸ’¼ STAFF -
          Ù…ÙˆØ¸Ù ØªØ§Ø¨Ø¹ Ù„Ù€ Owner â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          STAFF Ù…Ø±Ø¨ÙˆØ· Ø¨Ù€ OWNER Ø¹Ù† Ø·Ø±ÙŠÙ‚ parentUserId â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ USER
          HIERARCHY â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ User
          (OWNER) â”€â”¬â”€â”€ User (STAFF) - parentUserId â”‚ â”‚ â”œâ”€â”€ User (STAFF) â”‚ â”‚ â””â”€â”€
          User (STAFF) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>
      </section>

      <!-- Section: User Model -->
      <section class="section" id="user">
        <div class="section-header">
          <span class="icon">ğŸ‘¤</span>
          <h2>User Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>User</h3>
            <span class="badge">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</span>
          </div>
          <div class="model-body">
            <p style="color: #9ca3af; margin-bottom: 15px">
              ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: SuperAdmin, Owner, Staff
            </p>

            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">email</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</td>
                </tr>
                <tr>
                  <td><span class="field-name">passwordHash</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø´ÙØ±Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">name</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ù„Ø§Ø³Ù…</td>
                </tr>
                <tr>
                  <td><span class="field-name">type</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">SUPER_ADMIN / OWNER / STAFF</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">parentUserId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">
                    Ù„Ù„Ù€ STAFF ÙÙ‚Ø· - Ø§Ù„Ù€ OWNER Ø§Ù„Ù„ÙŠ ØªØ§Ø¨Ø¹Ù„Ù‡
                  </td>
                </tr>
                <tr>
                  <td><span class="field-name">status</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">ACTIVE / INACTIVE / SUSPENDED</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">lastLoginAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
                <tr>
                  <td><span class="field-name">updatedAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª (Relations)</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>parent</strong> â†’ User (N:1, self-relation)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>staffMembers[]</strong> â†’ User (1:N,
                  self-relation)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>permissions[]</strong> â†’ UserPermission (1:N)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>receivers[]</strong> â†’ AccountReceiver (1:N)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>devices[]</strong> â†’ Device (1:N)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>apiKeys[]</strong> â†’ ApiKey (1:N)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>webhookEndpoints[]</strong> â†’ WebhookEndpoint
                  (1:N)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>subscriptions[]</strong> â†’ Subscription (1:N)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>auditLogs[]</strong> â†’ AuditLog (1:N)</span>
              </div>
            </div>

            <div class="highlight-box info">
              <strong>â­ parentUserId:</strong><br />
              â€¢ SUPER_ADMIN: null (Ù…ÙÙŠØ´ parent)<br />
              â€¢ OWNER: null (Ù…ÙÙŠØ´ parent)<br />
              â€¢ STAFF: parentUserId = Ø§Ù„Ù€ OWNER Ø§Ù„Ù„ÙŠ ØªØ§Ø¨Ø¹Ù„Ù‡
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content">SUPER_ADMIN ÙŠØ¯ÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙƒÙ„Ù‡</span>
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >OWNER ÙŠØ³Ø¬Ù„ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ (type = OWNER, parentUserId =
                  null)</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >OWNER ÙŠØ¶ÙŠÙ STAFF (type = STAFF, parentUserId = OWNER.id)
                  ÙˆÙŠØ­Ø¯Ø¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Permissions -->
      <section class="section" id="permissions">
        <div class="section-header">
          <span class="icon">ğŸ”</span>
          <h2>Permissions System</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>UserPermission</h3>
            <span class="badge">ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒÙ„ user</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User</td>
                </tr>
                <tr>
                  <td><span class="field-name">page</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">Ø§Ù„ØµÙØ­Ø©/Ø§Ù„Ù‚Ø³Ù…</td>
                </tr>
                <tr>
                  <td><span class="field-name">canRead</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">canCreate</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
                <tr>
                  <td><span class="field-name">canUpdate</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</td>
                </tr>
                <tr>
                  <td><span class="field-name">canDelete</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø­Ø°Ù</td>
                </tr>
              </tbody>
            </table>

            <div class="index-box">
              <h4>ğŸ”‘ Unique Constraint</h4>
              <div class="index-item">(userId, page)</div>
            </div>

            <div class="enum-box">
              <h4>ğŸ“„ Pages Enum</h4>
              <div class="enum-grid">
                <div class="enum-item">
                  <span class="enum-value">INTEGRATION</span>
                  <span class="enum-desc">API & Webhooks</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">RECEIVERS</span>
                  <span class="enum-desc">Ø­Ø³Ø§Ø¨Ø§Øª InstaPay</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">PAYMENT_LINKS</span>
                  <span class="enum-desc">Ù„ÙŠÙ†ÙƒØ§Øª Ø§Ù„Ø¯ÙØ¹</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">REVIEW</span>
                  <span class="enum-desc">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">PAYMENTS</span>
                  <span class="enum-desc">ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">CUSTOMERS</span>
                  <span class="enum-desc">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">USERS</span>
                  <span class="enum-desc">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">SETTINGS</span>
                  <span class="enum-desc">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">LOGS</span>
                  <span class="enum-desc">Ø§Ù„Ø³Ø¬Ù„Ø§Øª</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">DEVICES</span>
                  <span class="enum-desc">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</span>
                </div>
              </div>
            </div>

            <h4 style="color: #00d9ff; margin: 20px 0 10px">
              Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…ÙˆØ¸Ù:
            </h4>
            <table class="permissions-table">
              <thead>
                <tr>
                  <th>Ø§Ù„ØµÙØ­Ø©</th>
                  <th>Read</th>
                  <th>Create</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>PAYMENTS</td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                </tr>
                <tr>
                  <td>REVIEW</td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="cross">âœ—</span></td>
                </tr>
                <tr>
                  <td>CUSTOMERS</td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="check">âœ“</span></td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                </tr>
                <tr>
                  <td>RECEIVERS</td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                  <td><span class="cross">âœ—</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Section: Plans -->
      <section class="section" id="plans">
        <div class="section-header">
          <span class="icon">ğŸ’³</span>
          <h2>Plans & Subscriptions</h2>
        </div>

        <!-- Plan Model -->
        <div class="model-card">
          <div class="model-header">
            <h3>Plan</h3>
            <span class="badge">Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ù…ØªØ§Ø­Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td><span class="field-name">name</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">"Basic", "Pro", "Enterprise"</td>
                </tr>
                <tr>
                  <td><span class="field-name">description</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">ÙˆØµÙ Ø§Ù„Ø®Ø·Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">priceMonthly</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¨Ø§Ù„Ù‚Ø±ÙˆØ´ (20000 = 200 EGP)</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ØªØ§Ø­Ø© Ù„Ù„Ø´Ø±Ø§Ø¡ØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>limits</strong> â†’ PlanLimit (1:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>subscriptions[]</strong> â†’ Subscription (1:N)</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- PlanLimit Model -->
        <div class="model-card">
          <div class="model-header">
            <h3>PlanLimit</h3>
            <span class="badge">Ø­Ø¯ÙˆØ¯ ÙƒÙ„ Ø®Ø·Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">planId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Plan</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxPaymentsPerMonth</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">-1 = unlimited</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxDevices</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxReceivers</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª IPA</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxStaffUsers</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxApiKeys</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ API Keys</td>
                </tr>
                <tr>
                  <td><span class="field-name">maxWebhooks</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Webhooks</td>
                </tr>
                <tr>
                  <td><span class="field-name">logRetentionDays</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ù…Ø¯Ø© Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</td>
                </tr>
                <tr>
                  <td><span class="field-name">hasApiAccess</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© API</td>
                </tr>
                <tr>
                  <td><span class="field-name">hasWebhookAccess</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØµÙ„Ø§Ø­ÙŠØ© Webhooks</td>
                </tr>
                <tr>
                  <td><span class="field-name">hasAutoMatching</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Subscription Model -->
        <div class="model-card">
          <div class="model-header">
            <h3>Subscription</h3>
            <span class="badge">Ø§Ø´ØªØ±Ø§Ùƒ User ÙÙŠ Ø®Ø·Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (OWNER only)</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">planId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Plan</td>
                </tr>
                <tr>
                  <td><span class="field-name">startDate</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</td>
                </tr>
                <tr>
                  <td><span class="field-name">endDate</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</td>
                </tr>
                <tr>
                  <td><span class="field-name">status</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">ACTIVE / EXPIRED / CANCELLED</td>
                </tr>
                <tr>
                  <td><span class="field-name">autoRenew</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>user</strong> â†’ User (N:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>plan</strong> â†’ Plan (N:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>extras[]</strong> â†’ SubscriptionExtra (1:N)</span>
              </div>
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Subscription Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content">OWNER ÙŠØ³Ø¬Ù„ â†’ ÙŠØ®ØªØ§Ø± Plan</span>
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >Subscription ÙŠØªØ¹Ù…Ù„: userId, planId, startDate = now, endDate
                  = now + 30 days, status = ACTIVE</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >Cron job ÙŠØªØ­Ù‚Ù‚ Ù…Ù† endDate ÙƒÙ„ ÙŠÙˆÙ…: Ù„Ùˆ Ø®Ù„Øµ + autoRenew â†’ ÙŠØ¬Ø¯Ø¯ØŒ
                  Ù„Ùˆ Ø®Ù„Øµ + !autoRenew â†’ status = EXPIRED</span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Extra Model -->
        <div class="model-card">
          <div class="model-header">
            <h3>Extra</h3>
            <span class="badge">Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td><span class="field-name">name</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">"Extra Device", "Extra Receiver"</td>
                </tr>
                <tr>
                  <td><span class="field-name">description</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">ÙˆØµÙ Ø§Ù„Ø¥Ø¶Ø§ÙØ©</td>
                </tr>
                <tr>
                  <td><span class="field-name">type</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">
                    DEVICE / RECEIVER / STAFF / PAYMENT_QUOTA / API_KEY
                  </td>
                </tr>
                <tr>
                  <td><span class="field-name">priceMonthly</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¨Ø§Ù„Ù‚Ø±ÙˆØ´</td>
                </tr>
                <tr>
                  <td><span class="field-name">quantityPerUnit</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">ÙƒÙ„ ÙˆØ­Ø¯Ø© Ø¨ØªØ¶ÙŠÙ ÙƒØ§Ù…</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ØªØ§Ø­Ø© Ù„Ù„Ø´Ø±Ø§Ø¡ØŸ</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- SubscriptionExtra Model -->
        <div class="model-card">
          <div class="model-header">
            <h3>SubscriptionExtra</h3>
            <span class="badge">Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…ÙØ¹Ù„Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">subscriptionId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Subscription</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">extraId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Extra</td>
                </tr>
                <tr>
                  <td><span class="field-name">quantity</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">startDate</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¥Ø¶Ø§ÙØ©</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">endDate</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ù†Ù‡Ø§ÙŠØ© (Ù…Ø¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ)</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="highlight-box">
              <strong>â­ Ù…Ø«Ø§Ù„:</strong><br />
              Ø´Ø±ÙƒØ© X Ø¹Ù„Ù‰ Ø®Ø·Ø© "Basic" (1 device) ÙˆØ§Ø´ØªØ±Øª 2x "Extra Device"<br /><br />
              <code
                >SubscriptionExtra: { subscriptionId: 5, extraId: 2, quantity: 2
                }</code
              ><br /><br />
              Total devices = 1 (Ù…Ù† Plan) + 2 (Ù…Ù† Extra) = 3 devices
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Customer -->
      <section class="section" id="customer">
        <div class="section-header">
          <span class="icon">ğŸ‘¥</span>
          <h2>Customer Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>Customer</h3>
            <span class="badge">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Global</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">ipa</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø±Ù‚Ù… IPA Ù„Ù„Ø¹Ù…ÙŠÙ„ (globally unique)</td>
                </tr>
                <tr>
                  <td><span class="field-name">name</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">phone</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">email</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">notes</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
                <tr>
                  <td><span class="field-name">updatedAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>paymentIntents[]</strong> â†’ PaymentIntent (1:N)</span
                >
              </div>
            </div>

            <div class="highlight-box warning">
              <strong>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:</strong><br />
              Customer Ù…Ø´ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù€ User/Account!<br />
              Ù†ÙØ³ Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø¨Ù†ÙØ³ Ø§Ù„Ù€ IPA) Ù…Ù…ÙƒÙ† ÙŠØ¯ÙØ¹ Ù„Ø£ÙƒØªØ± Ù…Ù† ØªØ§Ø¬Ø±.<br />
              Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ØªÙŠØ¬ÙŠ Ù…Ù† PaymentIntent.
            </div>

            <div class="hierarchy-box" style="margin-top: 15px">
              Customer: "Ø£Ø­Ù…Ø¯" (IPA: 012xxx) PaymentIntents: â”œâ”€â”€ Payment Ù„Ù€
              "Ù…ØªØ¬Ø± A" (receiver Ø¨ØªØ§Ø¹ Ù…ØªØ¬Ø± A) â”œâ”€â”€ Payment Ù„Ù€ "Ù…ØªØ¬Ø± A" (ØªØ§Ù†ÙŠ) â””â”€â”€
              Payment Ù„Ù€ "Ù…ØªØ¬Ø± B" (receiver Ø¨ØªØ§Ø¹ Ù…ØªØ¬Ø± B)
            </div>
          </div>
        </div>
      </section>

      <!-- Section: AccountReceiver -->
      <section class="section" id="receiver">
        <div class="section-header">
          <span class="icon">ğŸ’°</span>
          <h2>AccountReceiver Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>AccountReceiver</h3>
            <span class="badge">Ø­Ø³Ø§Ø¨Ø§Øª InstaPay Ù„Ù„ØªØ§Ø¬Ø±</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (OWNER only)</td>
                </tr>
                <tr>
                  <td><span class="field-name">receiverIpa</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø±Ù‚Ù… IPA Ù„Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</td>
                </tr>
                <tr>
                  <td><span class="field-name">displayName</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ø³Ù… Ù„Ù„Ø¹Ø±Ø¶</td>
                </tr>
                <tr>
                  <td><span class="field-name">isDefault</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ÙØ¹Ù„ØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="index-box">
              <h4>ğŸ”‘ Unique Constraint</h4>
              <div class="index-item">(userId, receiverIpa)</div>
            </div>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>user</strong> â†’ User (N:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>paymentIntents[]</strong> â†’ PaymentIntent (1:N)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>notifications[]</strong> â†’ Notification (1:N)</span
                >
              </div>
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content"
                  >OWNER ÙŠØ¶ÙŠÙ Ø­Ø³Ø§Ø¨ InstaPay Ø¨ØªØ§Ø¹Ù‡ (receiverIpa = "012xxx",
                  displayName = "Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ")</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >Ù„Ù…Ø§ ÙŠØ¹Ù…Ù„ PaymentIntent: ÙŠØ®ØªØ§Ø± Ø§Ù„Ù€ Receiver Ø§Ù„Ù„ÙŠ ÙŠØ³ØªÙ‚Ø¨Ù„
                  Ø¹Ù„ÙŠÙ‡</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ­ÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù€ Receiver IPA</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">4</span>
                <span class="step-content"
                  >Ù…Ù† Ø§Ù„Ù€ Receiver Ù†ÙˆØµÙ„ Ù„Ù„Ù€ User (ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨)</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: PaymentIntent -->
      <section class="section" id="payment">
        <div class="section-header">
          <span class="icon">ğŸ’¸</span>
          <h2>PaymentIntent Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>PaymentIntent</h3>
            <span class="badge">Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ù‡Ù…</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">publicId</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù„Ù„Ù€ URL: /pay/{publicId}</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">receiverId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ AccountReceiver</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">customerId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Customer</td>
                </tr>
                <tr>
                  <td><span class="field-name">amountMinor</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¨Ø§Ù„Ù‚Ø±ÙˆØ´ (10050 = 100.50 EGP)</td>
                </tr>
                <tr>
                  <td><span class="field-name">currency</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">default: "EGP"</td>
                </tr>
                <tr>
                  <td><span class="field-name">reference</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">OrderID / Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">description</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">ÙˆØµÙ Ø§Ù„Ø·Ù„Ø¨</td>
                </tr>
                <tr>
                  <td><span class="field-name">status</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</td>
                </tr>
                <tr>
                  <td><span class="field-name">expiresAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">paidAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">confirmedBy</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">AUTO / MANUAL</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">confirmedByUserId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (Ù„Ùˆ manual)</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">confidence</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Decimal</span></td>
                  <td class="field-desc">Ù†Ø³Ø¨Ø© Ø§Ù„Ø«Ù‚Ø© ÙÙŠ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø©</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">matchedNotificationId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Notification</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">revokeReason</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">metaJson</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
                <tr>
                  <td><span class="field-name">updatedAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«</td>
                </tr>
              </tbody>
            </table>

            <div class="highlight-box info">
              <strong>â­ Ù…ÙÙŠØ´ userId/accountId:</strong><br />
              Ø§Ù„Ù€ receiverId ÙƒÙØ§ÙŠØ© - Ù…Ù† receiver.userId Ù†ÙˆØµÙ„ Ù„Ù„Ù€ OWNER
            </div>

            <div class="enum-box">
              <h4>ğŸ“Š Status Enum</h4>
              <div class="enum-grid">
                <div class="enum-item">
                  <span class="enum-value">PENDING</span>
                  <span class="enum-desc">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">PAID</span>
                  <span class="enum-desc">ØªÙ… Ø§Ù„Ø¯ÙØ¹</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">REVIEW_REQUIRED</span>
                  <span class="enum-desc">Ù…Ø­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">CANCELLED</span>
                  <span class="enum-desc">Ù…Ù„ØºÙŠ</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">EXPIRED</span>
                  <span class="enum-desc">Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">REVOKED</span>
                  <span class="enum-desc">ØªÙ… Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡</span>
                </div>
              </div>
            </div>

            <div class="index-box">
              <h4>ğŸ“‡ Indexes</h4>
              <div class="index-item">(receiverId, status, createdAt)</div>
              <div class="index-item">(receiverId, amountMinor)</div>
              <div class="index-item">(publicId) - UNIQUE</div>
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Payment Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content"
                  >OWNER/STAFF ÙŠØ¹Ù…Ù„ PaymentIntent: ÙŠØ®ØªØ§Ø± receiver, ÙŠØ­Ø¯Ø¯ amount,
                  reference, customer (optional)</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >System ÙŠÙˆÙ„Ø¯: publicId = "pay_abc123", status = PENDING,
                  expiresAt = now + 24h</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >Payment Link: /pay/pay_abc123 â†’ ÙŠØªØ¨Ø¹Øª Ù„Ù„Ø¹Ù…ÙŠÙ„</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">4</span>
                <span class="step-content">Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ¯ÙØ¹ Ø¹Ù„Ù‰ InstaPay</span>
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">5</span>
                <span class="step-content"
                  >Notification ÙŠÙˆØµÙ„ â†’ Matching â†’ status = PAID (or
                  REVIEW_REQUIRED)</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Device -->
      <section class="section" id="device">
        <div class="section-header">
          <span class="icon">ğŸ“±</span>
          <h2>Device Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>Device</h3>
            <span class="badge">Ø¬Ù‡Ø§Ø² Android Ù…Ø±Ø¨ÙˆØ·</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (OWNER only)</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">deviceToken</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù„Ù„Ø±Ø¨Ø· ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚</td>
                </tr>
                <tr>
                  <td><span class="field-name">deviceName</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²</td>
                </tr>
                <tr>
                  <td><span class="field-name">deviceModel</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Samsung S21, etc</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ÙØ¹Ù„ØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">lastSeenAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¢Ø®Ø± Ø¸Ù‡ÙˆØ±</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>user</strong> â†’ User (N:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>notifications[]</strong> â†’ Notification (1:N)</span
                >
              </div>
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Device Linking Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content"
                  >OWNER ÙŠÙØªØ­ Dashboard â†’ Devices â†’ "Add Device"</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >System ÙŠÙˆÙ„Ø¯ Token Ù…Ø¤Ù‚Øª (ØµØ§Ù„Ø­ 10 Ø¯Ù‚Ø§ÙŠÙ‚) - ÙŠØªØ®Ø²Ù† ÙÙŠ Redis/Cache
                  - ÙŠØ¸Ù‡Ø± ÙƒÙ€ QR Code + Ù†Øµ</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >OWNER ÙŠÙØªØ­ Android App - ÙŠØ¯Ø®Ù„ Ø§Ù„Ù€ Token Ø£Ùˆ ÙŠÙ…Ø³Ø­ QR</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">4</span>
                <span class="step-content"
                  >App ÙŠØ¨Ø¹Øª: POST /api/devices/link { token, deviceName,
                  deviceModel }</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">5</span>
                <span class="step-content"
                  >Server ÙŠØªØ­Ù‚Ù‚: Token ØµØ§Ù„Ø­ØŸ Token Ù„Ø³Ù‡ Ù…Ø§ Ø§ØªØ³ØªØ®Ø¯Ù…Ø´ØŸ</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">6</span>
                <span class="step-content"
                  >Device record ÙŠØªØ¹Ù…Ù„: userId Ù…Ù† Ø§Ù„Ù€ Token, deviceToken =
                  generated unique</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">7</span>
                <span class="step-content">App ÙŠØ¨Ø¯Ø£ ÙŠØ¨Ø¹Øª Notifications</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Notification -->
      <section class="section" id="notification">
        <div class="section-header">
          <span class="icon">ğŸ””</span>
          <h2>Notification Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>Notification</h3>
            <span class="badge">Ø¥Ø´Ø¹Ø§Ø± Ø§Ø³ØªÙ„Ø§Ù… ÙÙ„ÙˆØ³</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">deviceId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ Device</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">receiverId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ AccountReceiver</td>
                </tr>
                <tr>
                  <td><span class="field-name">sourceApp</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">INSTAPAY, BANK_CIB, etc</td>
                </tr>
                <tr>
                  <td><span class="field-name">packageName</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">com.instapay.app</td>
                </tr>
                <tr>
                  <td><span class="field-name">rawText</span></td>
                  <td><span class="field-type">Text</span></td>
                  <td class="field-desc">Ø§Ù„Ù†Øµ Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">amountMinor</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">parsedSenderIpa</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">IPA Ø§Ù„Ù…Ø±Ø³Ù„</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">parsedSenderName</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„</td>
                </tr>
                <tr>
                  <td><span class="field-name">eventTimestamp</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ÙˆÙ‚Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²</td>
                </tr>
                <tr>
                  <td><span class="field-name">receivedAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ÙˆÙ‚Øª Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø³ÙŠØ±ÙØ±</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">dedupeKey</span>
                    <span class="tag tag-unique">UNIQUE</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±</td>
                </tr>
                <tr>
                  <td><span class="field-name">parseVersion</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">version Ø§Ù„Ù€ parser</td>
                </tr>
                <tr>
                  <td><span class="field-name">isMatched</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">ØªÙ… Ø±Ø¨Ø·Ù‡ Ø¨Ù€ IntentØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="relations-box">
              <h4>ğŸ”— Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</h4>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span><strong>device</strong> â†’ Device (N:1)</span>
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>receiver</strong> â†’ AccountReceiver (N:1,
                  optional)</span
                >
              </div>
              <div class="relation-item">
                <span class="relation-arrow">â†’</span>
                <span
                  ><strong>paymentIntent</strong> â†’ PaymentIntent (1:1,
                  optional)</span
                >
              </div>
            </div>

            <div class="highlight-box">
              <strong>â­ Ù…Ù† device.userId Ù†ÙˆØµÙ„ Ù„Ù„Ù€ Owner</strong>
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ Notification Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content"
                  >InstaPay notification ÙŠØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø²: "Ø§Ø³ØªÙ„Ù…Øª 100 Ø¬Ù†ÙŠÙ‡ Ù…Ù†
                  Ø£Ø­Ù…Ø¯"</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >Android App ÙŠÙ‚Ø±Ø£ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙˆÙŠØ¹Ù…Ù„ Parse: amount = 10000,
                  senderName = "Ø£Ø­Ù…Ø¯"</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >App ÙŠØ¨Ø¹Øª: POST /api/notifications { deviceToken, rawText,
                  amountMinor, parsedSenderName, eventTimestamp, dedupeKey
                  }</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">4</span>
                <span class="step-content"
                  >Server: ÙŠØªØ­Ù‚Ù‚ Ù…Ù† deviceToken â†’ ÙŠØ¬ÙŠØ¨ DeviceØŒ ÙŠØªØ­Ù‚Ù‚ Ù…Ù†
                  dedupeKey (Ù…Ø´ Ù…ÙƒØ±Ø±)ØŒ ÙŠØ¹Ù…Ù„ Notification record</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">5</span>
                <span class="step-content"
                  >Matching Engine ÙŠØ¯ÙˆØ± Ø¹Ù„Ù‰ PaymentIntent Ù…Ù†Ø§Ø³Ø¨: receiver.userId
                  = device.userId, status = PENDING, amount Ù…ØªØ·Ø§Ø¨Ù‚</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">6</span>
                <span class="step-content"
                  >Ù„Ùˆ Ù„Ù‚Ù‰ Match: PaymentIntent.status = PAID,
                  matchedNotificationId = notification.id, isMatched = true,
                  Trigger Webhook</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: API Integration -->
      <section class="section" id="api">
        <div class="section-header">
          <span class="icon">ğŸ”‘</span>
          <h2>API Integration</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>ApiKey</h3>
            <span class="badge">API Keys Ù„Ù„Ù€ External Integration</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (OWNER only)</td>
                </tr>
                <tr>
                  <td><span class="field-name">name</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">"Production", "Test"</td>
                </tr>
                <tr>
                  <td><span class="field-name">keyPrefix</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø£ÙˆÙ„ 8 Ø­Ø±ÙˆÙ Ù„Ù„Ø¹Ø±Ø¶: "ipk_abc1"</td>
                </tr>
                <tr>
                  <td><span class="field-name">keyHash</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">hash Ù„Ù„Ù€ key ÙƒØ§Ù…Ù„</td>
                </tr>
                <tr>
                  <td><span class="field-name">scopes</span></td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">["intents:read", "intents:write"]</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">lastUsedAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¢Ø®Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">expiresAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">revokedAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù„ØºØ§Ø¡</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ÙØ¹Ù„ØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="enum-box">
              <h4>ğŸ” Scopes</h4>
              <div class="enum-grid">
                <div class="enum-item">
                  <span class="enum-value">intents:read</span>
                  <span class="enum-desc">Ù‚Ø±Ø§Ø¡Ø© PaymentIntents</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">intents:write</span>
                  <span class="enum-desc">Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">customers:read</span>
                  <span class="enum-desc">Ù‚Ø±Ø§Ø¡Ø© Customers</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">customers:write</span>
                  <span class="enum-desc">Ø¥Ù†Ø´Ø§Ø¡/ØªØ¹Ø¯ÙŠÙ„</span>
                </div>
                <div class="enum-item">
                  <span class="enum-value">webhooks:read</span>
                  <span class="enum-desc">Ù‚Ø±Ø§Ø¡Ø© Logs</span>
                </div>
              </div>
            </div>

            <div class="highlight-box warning">
              <strong>âš ï¸ Security:</strong> Ø§Ù„Ù€ Key Ø¨ÙŠØªØ¹Ø±Ø¶ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³ Ø¹Ù†Ø¯
              Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ØŒ Ø¨Ø¹Ø¯Ù‡Ø§ Ø¨Ù†Ø®Ø²Ù† Ø§Ù„Ù€ hash ÙÙ‚Ø·
            </div>

            <div class="flow-box">
              <h4>ğŸ”„ API Key Flow</h4>
              <div class="flow-step">
                <span class="step-number">1</span>
                <span class="step-content"
                  >OWNER ÙŠØ¹Ù…Ù„ API Key Ù…Ù† Dashboard</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">2</span>
                <span class="step-content"
                  >Server ÙŠÙˆÙ„Ø¯: ipk_abc123xyz789...</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">3</span>
                <span class="step-content"
                  >ÙŠØªØ¹Ø±Ø¶ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© (User ÙŠØ¹Ù…Ù„ copy)</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">4</span>
                <span class="step-content"
                  >Server ÙŠØ®Ø²Ù†: keyPrefix = "ipk_abc1", keyHash =
                  bcrypt("ipk_abc123xyz789...")</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">5</span>
                <span class="step-content"
                  >External system ÙŠØ³ØªØ®Ø¯Ù…: Authorization: Bearer
                  ipk_abc123xyz789...</span
                >
              </div>
              <div class="step-arrow">â†“</div>
              <div class="flow-step">
                <span class="step-number">6</span>
                <span class="step-content"
                  >Server ÙŠØªØ­Ù‚Ù‚: ÙŠØ¬ÙŠØ¨ ApiKey by keyPrefix â†’ ÙŠÙ‚Ø§Ø±Ù† hash â†’ ÙŠØªØ­Ù‚Ù‚
                  Ù…Ù† scopes</span
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Webhook -->
      <section class="section" id="webhook">
        <div class="section-header">
          <span class="icon">ğŸŒ</span>
          <h2>Webhook System</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>WebhookEndpoint</h3>
            <span class="badge">URLs Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù€ Webhooks</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (OWNER only)</td>
                </tr>
                <tr>
                  <td><span class="field-name">url</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">https://mysite.com/webhook</td>
                </tr>
                <tr>
                  <td><span class="field-name">secret</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù„Ù„ØªÙˆÙ‚ÙŠØ¹ (X-Signature)</td>
                </tr>
                <tr>
                  <td><span class="field-name">events</span></td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</td>
                </tr>
                <tr>
                  <td><span class="field-name">isActive</span></td>
                  <td><span class="field-type">Boolean</span></td>
                  <td class="field-desc">Ù…ÙØ¹Ù„ØŸ</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>WebhookDelivery</h3>
            <span class="badge">Ø³Ø¬Ù„ Ø¥Ø±Ø³Ø§Ù„ ÙƒÙ„ Webhook</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">endpointId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ WebhookEndpoint</td>
                </tr>
                <tr>
                  <td><span class="field-name">eventType</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">payment.confirmed</td>
                </tr>
                <tr>
                  <td><span class="field-name">eventId</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">unique per event</td>
                </tr>
                <tr>
                  <td><span class="field-name">payloadJson</span></td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©</td>
                </tr>
                <tr>
                  <td><span class="field-name">signature</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">X-Signature header</td>
                </tr>
                <tr>
                  <td><span class="field-name">status</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">PENDING / SUCCESS / FAILED</td>
                </tr>
                <tr>
                  <td><span class="field-name">attemptCount</span></td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</td>
                </tr>
                <tr>
                  <td><span class="field-name">lastAttemptAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø¢Ø®Ø± Ù…Ø­Ø§ÙˆÙ„Ø©</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">nextRetryAt</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">responseCode</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Int</span></td>
                  <td class="field-desc">200, 500, etc</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">responseBody</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ø£ÙˆÙ„ 500 Ø­Ø±Ù</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="index-box">
              <h4>ğŸ”‘ Unique Constraint</h4>
              <div class="index-item">(endpointId, eventId) - idempotency</div>
            </div>
          </div>
        </div>

        <h4 style="color: #00d9ff; margin: 20px 0 15px">ğŸ“¢ Webhook Events</h4>
        <div class="webhook-events">
          <div class="webhook-event">
            <code>payment.created</code>
            <p>PaymentIntent Ø¬Ø¯ÙŠØ¯</p>
          </div>
          <div class="webhook-event">
            <code>payment.confirmed</code>
            <p>ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯ (Auto/Manual)</p>
          </div>
          <div class="webhook-event">
            <code>payment.review_required</code>
            <p>Ù…Ø­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
          </div>
          <div class="webhook-event">
            <code>payment.expired</code>
            <p>Ø§Ù†ØªÙ‡Øª Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</p>
          </div>
          <div class="webhook-event">
            <code>payment.cancelled</code>
            <p>ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</p>
          </div>
          <div class="webhook-event">
            <code>payment.revoked</code>
            <p>ØªÙ… Ø§Ù„ØªØ±Ø§Ø¬Ø¹</p>
          </div>
        </div>

        <div class="flow-box" style="margin-top: 20px">
          <h4>ğŸ”„ Webhook Flow</h4>
          <div class="flow-step">
            <span class="step-number">1</span>
            <span class="step-content"
              >OWNER ÙŠØ¶ÙŠÙ Webhook Endpoint: url, events = ["payment.confirmed",
              "payment.expired"]</span
            >
          </div>
          <div class="step-arrow">â†“</div>
          <div class="flow-step">
            <span class="step-number">2</span>
            <span class="step-content">System ÙŠÙˆÙ„Ø¯ secret Ù„Ù„ØªÙˆÙ‚ÙŠØ¹</span>
          </div>
          <div class="step-arrow">â†“</div>
          <div class="flow-step">
            <span class="step-number">3</span>
            <span class="step-content"
              >Ù„Ù…Ø§ ÙŠØ­ØµÙ„ Event (Ù…Ø«Ù„Ø§Ù‹ payment.confirmed)</span
            >
          </div>
          <div class="step-arrow">â†“</div>
          <div class="flow-step">
            <span class="step-number">4</span>
            <span class="step-content"
              >System ÙŠØ¹Ù…Ù„ payload JSON â†’ signature = HMAC(payload, secret) â†’
              ÙŠØ¨Ø¹Øª POST request</span
            >
          </div>
          <div class="step-arrow">â†“</div>
          <div class="flow-step">
            <span class="step-number">5</span>
            <span class="step-content"
              >WebhookDelivery ÙŠØªØ¹Ù…Ù„: status = PENDING</span
            >
          </div>
          <div class="step-arrow">â†“</div>
          <div class="flow-step">
            <span class="step-number">6</span>
            <span class="step-content"
              >Ù„Ùˆ Response 2xx â†’ status = SUCCESSØŒ Ù„Ùˆ ØºÙŠØ± ÙƒØ¯Ù‡ â†’ status = FAILED,
              attemptCount++, Retry up to 5 times</span
            >
          </div>
        </div>

        <div class="code-block" style="margin-top: 20px">
          <span class="comment">// Webhook Payload Example</span>
          {
          <span class="string">"event"</span>:
          <span class="string">"payment.confirmed"</span>,
          <span class="string">"eventId"</span>:
          <span class="string">"evt_123456"</span>,
          <span class="string">"timestamp"</span>:
          <span class="string">"2026-02-03T10:30:00Z"</span>,
          <span class="string">"data"</span>: {
          <span class="string">"paymentIntentId"</span>:
          <span class="string">"pi_abc123"</span>,
          <span class="string">"publicId"</span>:
          <span class="string">"pay_xyz789"</span>,
          <span class="string">"amount"</span>:
          <span class="keyword">10050</span>,
          <span class="string">"currency"</span>:
          <span class="string">"EGP"</span>,
          <span class="string">"reference"</span>:
          <span class="string">"ORDER-123"</span>,
          <span class="string">"status"</span>:
          <span class="string">"PAID"</span>,
          <span class="string">"confirmedBy"</span>:
          <span class="string">"AUTO"</span>,
          <span class="string">"paidAt"</span>:
          <span class="string">"2026-02-03T10:30:00Z"</span> } }
        </div>
      </section>

      <!-- Section: AuditLog -->
      <section class="section" id="audit">
        <div class="section-header">
          <span class="icon">ğŸ“‹</span>
          <h2>AuditLog Model</h2>
        </div>

        <div class="model-card">
          <div class="model-header">
            <h3>AuditLog</h3>
            <span class="badge">Ø³Ø¬Ù„ ÙƒÙ„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ù‡Ù…Ø©</span>
          </div>
          <div class="model-body">
            <table class="fields-table">
              <thead>
                <tr>
                  <th>Field</th>
                  <th>Type</th>
                  <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <span class="field-name">id</span>
                    <span class="tag tag-pk">PK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">UUID</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userId</span>
                    <span class="tag tag-fk">FK</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (Ø§Ù„Ø­Ø³Ø§Ø¨ - OWNER)</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">actorUserId</span>
                    <span class="tag tag-fk">FK</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">â†’ User (Ù…ÙŠÙ† Ø¹Ù…Ù„ Ø§Ù„Ù€ action)</td>
                </tr>
                <tr>
                  <td><span class="field-name">actorType</span></td>
                  <td><span class="field-type">Enum</span></td>
                  <td class="field-desc">USER / SYSTEM / API</td>
                </tr>
                <tr>
                  <td><span class="field-name">action</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Ù†ÙˆØ¹ Ø§Ù„Ù€ action</td>
                </tr>
                <tr>
                  <td><span class="field-name">entityType</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">PaymentIntent, User, etc</td>
                </tr>
                <tr>
                  <td><span class="field-name">entityId</span></td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">ID Ø§Ù„Ù€ entity</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">beforeJson</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">Ø§Ù„Ø­Ø§Ù„Ø© Ù‚Ø¨Ù„</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">afterJson</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">Json</span></td>
                  <td class="field-desc">Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø¹Ø¯</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">ipAddress</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">IP Address</td>
                </tr>
                <tr>
                  <td>
                    <span class="field-name">userAgent</span>
                    <span class="tag tag-nullable">NULL</span>
                  </td>
                  <td><span class="field-type">String</span></td>
                  <td class="field-desc">Browser/App info</td>
                </tr>
                <tr>
                  <td><span class="field-name">createdAt</span></td>
                  <td><span class="field-type">DateTime</span></td>
                  <td class="field-desc">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</td>
                </tr>
              </tbody>
            </table>

            <div class="highlight-box info">
              <strong>â­ userId vs actorUserId:</strong><br />
              â€¢ <strong>userId</strong> = Ø§Ù„Ù€ OWNER ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù„Ù„Ù€
              filtering)<br />
              â€¢ <strong>actorUserId</strong> = Ù…ÙŠÙ† Ø¹Ù…Ù„ Ø§Ù„Ù€ action (OWNER Ø£Ùˆ
              STAFF)
            </div>

            <div class="enum-box">
              <h4>ğŸ“ Actions</h4>
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                  gap: 20px;
                  margin-top: 15px;
                "
              >
                <div>
                  <h5 style="color: #00d9ff; margin-bottom: 10px">Payment</h5>
                  <ul
                    style="list-style: none; color: #9ca3af; font-size: 0.9rem"
                  >
                    <li>â€¢ INTENT_CREATED</li>
                    <li>â€¢ INTENT_CANCELLED</li>
                    <li>â€¢ INTENT_EXPIRED</li>
                    <li>â€¢ PAYMENT_CONFIRMED_AUTO</li>
                    <li>â€¢ PAYMENT_CONFIRMED_MANUAL</li>
                    <li>â€¢ PAYMENT_REVOKED</li>
                    <li>â€¢ PAYMENT_REVIEW_REQUIRED</li>
                  </ul>
                </div>
                <div>
                  <h5 style="color: #00d9ff; margin-bottom: 10px">Users</h5>
                  <ul
                    style="list-style: none; color: #9ca3af; font-size: 0.9rem"
                  >
                    <li>â€¢ USER_CREATED</li>
                    <li>â€¢ USER_UPDATED</li>
                    <li>â€¢ USER_DELETED</li>
                    <li>â€¢ USER_LOGIN</li>
                    <li>â€¢ USER_LOGOUT</li>
                    <li>â€¢ PASSWORD_CHANGED</li>
                    <li>â€¢ PERMISSIONS_UPDATED</li>
                  </ul>
                </div>
                <div>
                  <h5 style="color: #00d9ff; margin-bottom: 10px">Settings</h5>
                  <ul
                    style="list-style: none; color: #9ca3af; font-size: 0.9rem"
                  >
                    <li>â€¢ RECEIVER_CREATED</li>
                    <li>â€¢ RECEIVER_UPDATED</li>
                    <li>â€¢ RECEIVER_DELETED</li>
                    <li>â€¢ API_KEY_CREATED</li>
                    <li>â€¢ API_KEY_REVOKED</li>
                    <li>â€¢ WEBHOOK_CREATED</li>
                    <li>â€¢ WEBHOOK_UPDATED</li>
                    <li>â€¢ WEBHOOK_DELETED</li>
                    <li>â€¢ DEVICE_LINKED</li>
                    <li>â€¢ DEVICE_REMOVED</li>
                  </ul>
                </div>
                <div>
                  <h5 style="color: #00d9ff; margin-bottom: 10px">
                    Subscription
                  </h5>
                  <ul
                    style="list-style: none; color: #9ca3af; font-size: 0.9rem"
                  >
                    <li>â€¢ SUBSCRIPTION_CREATED</li>
                    <li>â€¢ SUBSCRIPTION_RENEWED</li>
                    <li>â€¢ SUBSCRIPTION_CANCELLED</li>
                    <li>â€¢ EXTRA_PURCHASED</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Section: Summary -->
      <section class="section" id="summary">
        <div class="section-header">
          <span class="icon">ğŸ“Š</span>
          <h2>Ù…Ù„Ø®Øµ Ø§Ù„Ù€ Models ÙˆØ§Ù„Ø±Ø¨Ø·</h2>
        </div>

        <div class="hierarchy-box">
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          RELATIONSHIPS MAP â”‚
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
          â”‚ â”‚ User (SUPER_ADMIN / OWNER / STAFF) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ parentUserId â”€â”€â†’
          User (self, for STAFF) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ UserPermission (1:N) â”‚ â”‚ â”‚ â”‚ â”‚
          â”œâ”€â”€ AccountReceiver (1:N) â”€â”€â†’ PaymentIntent (1:N) â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€
          Customer (N:1) â”‚ â”‚ â”‚ â””â”€â”€ Notification (1:1) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ Device (1:N)
          â”€â”€â†’ Notification (1:N) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€ ApiKey (1:N) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€
          WebhookEndpoint (1:N) â”€â”€â†’ WebhookDelivery (1:N) â”‚ â”‚ â”‚ â”‚ â”‚ â”œâ”€â”€
          Subscription (1:N) â”€â”€â†’ SubscriptionExtra (1:N) â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€
          Plan â”€â”€â†’ PlanLimit â””â”€â”€ Extra â”‚ â”‚ â”‚ â”‚ â”‚ â””â”€â”€ AuditLog (1:N) â”‚ â”‚ â”‚ â”‚
          Customer (Global - no user relation) â”‚ â”‚ â””â”€â”€ PaymentIntent (1:N) â”‚ â”‚ â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </div>

        <div class="summary-grid">
          <div class="summary-card">
            <h4>ğŸ‘¤ Auth & Users</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ User</li>
              <li>ğŸ“Œ UserPermission</li>
            </ul>
          </div>
          <div class="summary-card">
            <h4>ğŸ’³ Plans & Billing</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ Plan</li>
              <li>ğŸ“Œ PlanLimit</li>
              <li>ğŸ“Œ Subscription</li>
              <li>ğŸ“Œ Extra</li>
              <li>ğŸ“Œ SubscriptionExtra</li>
            </ul>
          </div>
          <div class="summary-card">
            <h4>ğŸ’¸ Payment Core</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ Customer</li>
              <li>ğŸ“Œ AccountReceiver</li>
              <li>ğŸ“Œ PaymentIntent</li>
            </ul>
          </div>
          <div class="summary-card">
            <h4>ğŸ“± Notifications</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ Device</li>
              <li>ğŸ“Œ Notification</li>
            </ul>
          </div>
          <div class="summary-card">
            <h4>ğŸ”— Integration</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ ApiKey</li>
              <li>ğŸ“Œ WebhookEndpoint</li>
              <li>ğŸ“Œ WebhookDelivery</li>
            </ul>
          </div>
          <div class="summary-card">
            <h4>ğŸ“‹ Audit</h4>
            <ul class="summary-list">
              <li>ğŸ“Œ AuditLog</li>
            </ul>
          </div>
        </div>

        <div style="margin-top: 30px; text-align: center">
          <h3 style="color: #10b981; margin-bottom: 15px">
            ğŸ“¦ Total: 14 Models
          </h3>
          <p style="color: #6b7280">
            User, UserPermission, Plan, PlanLimit, Subscription, Extra,
            SubscriptionExtra, Customer, AccountReceiver, PaymentIntent, Device,
            Notification, ApiKey, WebhookEndpoint, WebhookDelivery, AuditLog
          </p>
        </div>
      </section>

      <footer>
        <p>InstaFlow Database Schema Documentation</p>
        <p style="margin-top: 10px">Generated: February 2026</p>
      </footer>
    </div>
  </body>
</html>
